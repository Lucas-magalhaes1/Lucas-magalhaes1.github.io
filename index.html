<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Exemplo de Site com Medidas de Segurança</title>
  <!-- Adicione a seguinte linha para incluir o Google reCAPTCHA -->
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>

<body>
  <h1>Bem-vindo!</h1>
  <p>Este é um site básico que utiliza algumas medidas de segurança contra ataques DDoS e inclui uma verificação de
    captchas.</p>

  <!-- Firewall de Aplicação Web (WAF) -->
  <script>
    // Simulação de um Firewall de Aplicação Web (WAF)
    // Neste exemplo, bloquearemos IPs que fazem solicitações excessivas em um curto período de tempo.
    const rateLimit = {};

    function blockIP(ip) {
      rateLimit[ip] = (rateLimit[ip] || 0) + 1;
      if (rateLimit[ip] > 10) {
        alert(`Seu IP ${ip} foi bloqueado temporariamente por exceder o limite de solicitações.`);
      }
    }
  </script>

  <!-- Limite de Taxa de Solicitações (Rate Limiting) -->
  <script>
    const btnElement = document.querySelector('button');
    const allowedRequests = 10; // Limite de solicitações permitidas em um curto período de tempo
    let requestCount = 0;

    function handleButtonClick() {
      requestCount++;
      if (requestCount > allowedRequests) {
        btnElement.disabled = true;
        setTimeout(() => {
          requestCount = 0;
          btnElement.disabled = false;
        }, 5000); // Bloquear temporariamente o botão por 5 segundos
        alert(`Você atingiu o limite de solicitações permitidas. Tente novamente em alguns segundos.`);
      } else {
        blockIP('192.168.0.1'); // Substitua '192.168.0.1' pelo IP do cliente real
      }
    }

    btnElement.addEventListener('click', handleButtonClick);
  </script>

  <!-- Verificação de Captchas -->
  <form>
    <!-- Substitua 'SEU_SITE_KEY' pela chave do seu site fornecida pelo Google reCAPTCHA -->
    <div class="g-recaptcha" data-sitekey="SEU_SITE_KEY"></div>
    <button type="submit">Enviar</button>
  </form>

  <p>Experimente clicar várias vezes no botão acima em um curto espaço de tempo. O botão será bloqueado temporariamente
    após atingir o limite de solicitações permitidas. Além disso, preencha o captcha corretamente antes de enviar o
    formulário.</p>
</body>

</html>